# EventSource - Watches ConfigMap for commit changes
# The CronWorkflow updates the ConfigMap, this EventSource detects changes

apiVersion: argoproj.io/v1alpha1
kind: EventSource
metadata:
  name: github
  namespace: argo
spec:
  # Watch for ConfigMap updates from the polling workflow
  resource:
    github-commits:
      namespace: argo
      group: ""
      version: v1
      resource: configmaps
      eventTypes:
        - ADD
        - UPDATE
      filter:
        labels:
          - key: app
            operation: "=="
            value: github-poller
